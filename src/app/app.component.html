<section class="container">
  <header>Resume Maker</header>

  <form class="form" [formGroup]="resumeForm" (ngSubmit)="onsubmit()">
    <div class="column">
      <div class="input-box">
        <input
          type="text"
          placeholder="First Name"
          formControlName="firstname"
        />
        <small *ngIf="this.resumeForm.get('firstname')?.invalid && this.resumeForm.get('firstname')?.touched">FirstName is required</small>
      </div>
      <div class="input-box">
        <input type="text" placeholder="Last Name" formControlName="lastname" />
        <small *ngIf="this.resumeForm.get('lastname')?.invalid && this.resumeForm.get('lastname')?.touched">LastName is required</small>
      </div>
    </div>

    <div class="input-box">
      <input type="text" placeholder="Email" formControlName="email" />
      <small *ngIf="this.resumeForm.get('email')?.invalid && this.resumeForm.get('email')?.touched">email is required</small>
    </div>
    <div>
      <br>
      <button  class="btn-add-delete" (click)="uploaddata()">Upload</button>
    </div>
    <div class="column">
      <div class="input-box">
        <br>
        <input
          type="text"
          placeholder="summery"
          formControlName="username"
        />
        <small *ngIf="this.resumeForm.get('username')?.invalid && this.resumeForm.get('username')?.touched">Tought is required</small>
        <!-- <button class="btn-gen-username" type="button"  (click)="genrateusername()">
          Create a Username
        </button> -->
      </div>
      <div class="input-box">
        &nbsp;  &nbsp;  &nbsp;<small>Enter Dob</small>
        <input type="date" placeholder="Date of Birth" formControlName="dob" />
        <small *ngIf="this.resumeForm.get('dob')?.invalid && this.resumeForm.get('dob')?.touched">Dob is required</small>
      </div>
    </div>

    <div class="gender-box">
      <h3>Gender</h3>
      <div class="gender-option">
        <div class="gender">
          <input
            type="radio"
            value="male"
            id="check-male"
            formControlName="gender"
          />
          <label for="check-male">Male</label>
        </div>
        <div class="gender">
          <input
            type="radio"
            value="female"
            id="check-female"
            formControlName="gender"
          />
          <label for="check-female">Female</label>
        </div>
        <div class="gender">
          <input
            type="radio"
            value="other"
            id="check-other"
            formControlName="gender"
          />
          <label for="check-other">Prefer not to say</label>
        </div>
      </div>
    </div>

    <div class="input-box address" formGroupName="address">
      <label>Address</label>
      <input
        type="text"
        placeholder="Street address"
        formControlName="street"
      />
      <small *ngIf="this.resumeForm.get('address.street')?.invalid && this.resumeForm.get('address.street')?.touched">street is required</small>
      <div class="column">
        <div class="select-box">
          <select name="country" formControlName="country">
            <option hidden>Country</option>
            <option value="America">America</option>
            <option value="Japan">Japan</option>
            <option value="India">India</option>
            <option value="Nepal">Nepal</option>
          </select>
          <small *ngIf="this.resumeForm.get('address.country')?.invalid && this.resumeForm.get('address.country')?.touched">Country is required</small>
        </div>
        <input type="text" placeholder="City" formControlName="city" />
        <small *ngIf="this.resumeForm.get('address.city')?.invalid && this.resumeForm.get('address.city')?.touched">City is required</small>
      </div>
      <div class="column">
        <input type="text" placeholder="Area" formControlName="Area" />
        <small *ngIf="this.resumeForm.get('address.Area')?.invalid && this.resumeForm.get('address.Area')?.touched">Area is required</small>
        <input
          type="number"
          placeholder="Postal code"
          formControlName="postal"
        />
        <small *ngIf="this.resumeForm.get('address.postal')?.invalid && this.resumeForm.get('address.postal')?.touched">Zipcode is required</small>
      </div>
    </div>

    <!--HTML for Skills Form Array -->
    <div class="input-box skills" formArrayName="skills">
      <h4>Add Skills</h4>
      <div class="column" *ngFor="let item of data(); let i=index">
        <input type="text" placeholder="Add Skill..." [formControlName]="i" />
        <small *ngIf="this.resumeForm.get('skills')?.invalid && this.resumeForm.get('skills')?.touched">Skills is required</small>
        <button type="button" class="btn-add-delete" (click)="deleteskill(i)">Delete</button>
      </div>
    </div>
    <button type="button" class="btn-add-delete" (click)="Addskills()">
      Add Skills
    </button>

    <!--HTML for Experience Form Array -->
    <div class="input-box" formArrayName="eduction">
      <div
        class="experience"
        *ngFor="let item of data1() let i=index;"
        [formGroupName]="i"
      >
        <label>Experience {{i+1}}</label>
        <input
          type="text"
          placeholder="School/University Name"
          formControlName="school"
        />
        <small *ngIf="this.resumeForm.get('eduction.school')?.invalid && this.resumeForm.get('eduction.school')?.touched">SchoolName is required</small>
        <div class="column">
          <div class="select-box">
            <select formControlName="degree">
              <option hidden>Position</option>
              <option value="SSC">SSC</option>
              <option value="HSC">HSC</option>
              <option value="BACHELOR">BACHELOR</option>
              <option value="MASTER">MASTER</option>
            </select>
          </div>
          <input type="number" placeholder="PR%" formControlName="percentage" />
          <small *ngIf="this.resumeForm.get('eduction.degree')?.invalid && this.resumeForm.get('eduction.degree')?.touched">Degree is required</small>
        </div>
        <div class="column">
          <input type="date" placeholder="Start Date" formControlName="start" />
          <small *ngIf="this.resumeForm.get('eduction.start')?.invalid && this.resumeForm.get('eduction.start')?.touched">StartDate  is required</small>
          <input type="date" placeholder="End Date" formControlName="end" />
          <small *ngIf="this.resumeForm.get('eduction.end')?.invalid && this.resumeForm.get('eduction.end')?.touched">endDate is required</small>
        </div>
        <button type="button" class="btn-add-delete" (click)="deleteEduction(i)">Delete Eduction</button>
      </div>
    </div>
    <button type="button" class="btn-add-delete" (click)="AddEduction()">
      Add Eduction
    </button>

    <!-- <input type="submit" value="Submit" class="submit-btn" /> -->
   <!-- For Exprience Secetion-->
    <div class="input-box" formArrayName="experience">
      <div
        class="experience"
        *ngFor="let item of data2() let i=index"
        [formGroupName]="i"
      >
        <label>Experience {{i+1}}</label>
        <input type="text" placeholder="Company Name" formControlName="cName" />
        <small *ngIf="this.resumeForm.get('experience.cName')?.invalid && this.resumeForm.get('experience.cName')?.touched">companyName is required</small>
        <div class="column">
          <div class="select-box">
            <select formControlName="position">
              <option hidden>Position</option>
              <option value="JuniorDeveloper">Junior Developer</option>
              <option value="SoftwareDeveloper">Software Developer</option>
              <option value="SeniorDeveloper">Senior Developer</option>
              <option value="TeamLead">Team Lead</option>
            </select>
            <small *ngIf="this.resumeForm.get('experience.position')?.invalid && this.resumeForm.get('experience.position')?.touched">Postion is required</small>
          </div>
          <input
            type="number"
            placeholder="Experience"
            formControlName="Experience"
          />
          <small *ngIf="this.resumeForm.get('experience.Experience')?.invalid && this.resumeForm.get('experience.Experience')?.touched">Experince is required</small>
        </div>
        <div class="column">
          <input type="date" placeholder="Start Date" formControlName="start" />
          <small *ngIf="this.resumeForm.get('experience.start')?.invalid && this.resumeForm.get('experience.end')?.touched">strat is required</small>
          <input type="date" placeholder="End Date" formControlName="end" />
          <small *ngIf="this.resumeForm.get('experience.end')?.invalid && this.resumeForm.get('experience.end')?.touched">end is required</small>
        </div>
        <button type="button" class="btn-add-delete" (click)="delteExperience(i)">Delete Experience</button>
      </div>
    </div>
    <button type="button" class="btn-add-delete" (click)="AddExperience()">
      Add Experience
    </button>
    <br>
    <button class="btn-add-delete" (click)="convertpdf()" *ngIf="editmode">PDF</button>
    <input type="submit" value="Submit" class="submit-btn"
      />

    <!-- [disabled]="!reactiveForm.valid" -->
  </form>
</section>

  <section class="user-detail-container" *ngIf="formdata" id="userDetail">
    <div class="container">
      <div class="user-details-container">
        <div class="user-avatar">
          <p>{{ formdata.firstname?.slice(0,1) | uppercase }}{{ formdata.lastname?.slice(0,1) | uppercase }}</p>
        </div>
        <div class="user-details">
          <div class="user-name">
            <h2>{{ formdata.firstname }} {{formdata.lastname}}</h2>
          </div>
          <p><b>📧 Email:</b> <a href="#">{{ formdata.email }}</a></p>
          <p><b>👤summery:</b> {{ formdata.username }}</p>
          <p><b>🎂 Date of birth:</b> {{ formdata.dob }}</p>
          <div class="user-name">
            <h3>Address</h3>
          </div>
          <p>🏡 {{ formdata.address?.street}}, {{ formdata.address?.Area }} , {{ formdata.address?.city }}, {{formdata.address?.postal}}</p>
          <hr>
          <div class="user-name">
            <h3>👩‍💻 Skills</h3>
          </div>
          <ul *ngFor="let skill of formdata.skills">
            <li>{{ skill }}</li>
          </ul>
          <hr>
          <div class="user-name">
            <h3>🏫 Education</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>No.</th>
                <th>school/Collage Name</th>
                <th>Cource/Streem</th>
                <th>Percentage</th>
                <th>Start Date`</th>
                <th>End Date</th>

              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of formdata.eduction; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ item.school }}</td>
                <td>{{ item.degree }}</td>
                <td>{{ item.percentage }}</td>
                <td>{{ item.start }}</td>
                <td>{{ item.end }}</td>

              </tr>
            </tbody>
          </table>
          <div class="user-name">
            <h3>Experience</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>No.</th>
                <th>Company Name</th>
                <th>Company Position</th>
                <th>Experience</th>
                <th>Start Date</th>
                <th>End Date</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let experience of formdata.experience; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{ experience.cName}}</td>
                <td>{{ experience.position }}</td>
                <td>{{ experience.Experience }}</td>
                <td>{{ experience.start }}</td>
                <td>{{ experience.end }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
